"use strict";(()=>{var e={};e.id=405,e.ids=[405,660],e.modules={694:(e,t,r)=>{r.r(t),r.d(t,{config:()=>k,default:()=>f,getServerSideProps:()=>j,getStaticPaths:()=>S,getStaticProps:()=>v,reportWebVitals:()=>w,routeModule:()=>q,unstable_getServerProps:()=>C,unstable_getServerSideProps:()=>_,unstable_getStaticParams:()=>y,unstable_getStaticPaths:()=>P,unstable_getStaticProps:()=>N});var s={};r.r(s),r.d(s,{default:()=>HomePage});var a=r(7093),n=r(5244),i=r(1323),l=r(9209),c=r.n(l),o=r(5506),d=r(997),u=r(6689),x=r(1664),m=r.n(x);let h=require("react-qr-code");var p=r.n(h);function RecordCard({rec:e,showButton:t=!0}){let r=`/record/${e.id}`;return(0,d.jsxs)("div",{className:"bg-white rounded-2xl shadow-md p-6 flex flex-col items-center hover:shadow-xl transition cursor-pointer",children:[d.jsx("div",{className:"text-5xl mb-4",children:e.file.match(/\.(mp4|avi)$/)?"\uD83C\uDFAC":"\uD83C\uDFB5"}),d.jsx("h2",{className:"text-lg font-semibold mb-4 text-center",children:e.title}),d.jsx("div",{className:"mb-4",children:d.jsx(p(),{value:""+r,size:96})}),t&&d.jsx(m(),{href:r,className:"mt-2 inline-block bg-indigo-600 text-white px-4 py-2 rounded-xl hover:bg-indigo-700 text-center",children:"Atidaryti"})]})}let b=require("html5-qrcode");function QrScanner({onScanSuccess:e,onClose:t}){let r=(0,u.useRef)(null),s=(0,u.useRef)(null),[a,n]=(0,u.useState)(!1);return(0,u.useEffect)(()=>{if(!a||!r.current)return;s.current=new b.Html5Qrcode(r.current.id);let t={fps:10,qrbox:250,experimentalFeatures:{useBarCodeDetectorIfSupported:!0}};return s.current.start({facingMode:"environment"},t,t=>{e(t),s.current.stop(),n(!1)},e=>{}).catch(async r=>{await s.current.start({facingMode:"user"},t,t=>{e(t),s.current.stop(),n(!1)},e=>{}).catch(e=>{alert("Kamera nepasiekiama. Patikrinkite prieigą prie kameros."),n(!1)})}),()=>{s.current?.stop().catch(()=>{})}},[a]),d.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-70 flex items-center justify-center",children:(0,d.jsxs)("div",{className:"bg-white rounded-xl p-6 w-full max-w-md flex flex-col items-center",children:[d.jsx("h2",{className:"text-xl font-bold mb-4",children:"Scan QR Code"}),a?d.jsx("div",{id:"qr-reader",className:"w-full h-64 mb-4",ref:r}):d.jsx("button",{onClick:()=>n(!0),className:"bg-yellow-400 text-black px-4 py-2 rounded-lg font-semibold mb-4 hover:bg-yellow-500 transition",children:"Tap to Scan"}),d.jsx("button",{onClick:()=>{s.current?.stop().catch(()=>{}),n(!1),t()},className:"text-gray-700 underline",children:"Cancel"})]})})}var g=r(9711);function HomePage(){let[e,t]=(0,u.useState)(!1),[r,s]=(0,u.useState)(null),[a,n]=(0,u.useState)(!1);(0,u.useEffect)(()=>{let checkMobile=()=>t(window.innerWidth<768);return checkMobile(),window.addEventListener("resize",checkMobile),()=>window.removeEventListener("resize",checkMobile)},[]);let handleCardClick=t=>{e&&s(t)},closeScanner=()=>n(!1);return(0,d.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[d.jsx("header",{className:"bg-gradient-to-r from-blue-700 to-blue-900 text-white py-6 shadow",children:(0,d.jsxs)("div",{className:"container mx-auto px-4 text-center",children:[d.jsx("h1",{className:"text-2xl font-bold",children:"Mokomosios knygos įrašai"}),d.jsx("p",{className:"text-sm mt-1",children:"Pasirinkite įrašą arba nuskenuokite QR kodą"})]})}),(0,d.jsxs)("main",{className:"container mx-auto px-4 py-8",children:[r&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50",children:(0,d.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-xl text-center",children:[d.jsx("h2",{className:"text-xl font-semibold mb-4",children:r.title}),d.jsx("p",{className:"mb-4 text-gray-600",children:"Tap to Scan QR code \uD83D\uDC47"}),d.jsx(RecordCard,{rec:r,showButton:!1}),d.jsx("button",{onClick:()=>s(null),className:"mt-4 px-4 py-2 bg-red-500 text-white rounded-xl hover:bg-red-600",children:"Uždaryti"})]})}),a&&d.jsx(QrScanner,{onScanSuccess:e=>{alert(`QR nuskaitytas: ${e}`),closeScanner()},onClose:closeScanner}),d.jsx("div",{className:"flex justify-center mb-6",children:d.jsx("button",{onClick:()=>n(!0),className:"bg-green-600 text-white px-4 py-2 rounded-xl hover:bg-green-700 transition",children:"Tap to Scan (Mobile/Desktop)"})}),d.jsx("div",{className:`grid gap-6 ${e?"grid-cols-1":"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3"}`,children:g.Z.map(t=>d.jsx("div",{onClick:()=>handleCardClick(t),children:d.jsx(RecordCard,{rec:t,showButton:!e})},t.id))})]})]})}let f=(0,i.l)(s,"default"),v=(0,i.l)(s,"getStaticProps"),S=(0,i.l)(s,"getStaticPaths"),j=(0,i.l)(s,"getServerSideProps"),k=(0,i.l)(s,"config"),w=(0,i.l)(s,"reportWebVitals"),N=(0,i.l)(s,"unstable_getStaticProps"),P=(0,i.l)(s,"unstable_getStaticPaths"),y=(0,i.l)(s,"unstable_getStaticParams"),C=(0,i.l)(s,"unstable_getServerProps"),_=(0,i.l)(s,"unstable_getServerSideProps"),q=new a.PagesRouteModule({definition:{kind:n.x.PAGES,page:"/index",pathname:"/",bundlePath:"",filename:""},components:{App:o.default,Document:c()},userland:s})},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},997:e=>{e.exports=require("react/jsx-runtime")},1017:e=>{e.exports=require("path")}};var t=require("../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[209,562,588,664,807],()=>__webpack_exec__(694));module.exports=r})();